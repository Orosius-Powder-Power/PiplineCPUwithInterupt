# 流水线CPU综合设计

## 系统功能

**1.支持riscv 37条指令，能够下板测试。**

**2.支持中断功能。其中包含内部异常（除0中断、溢出中断等）、系统调用（ecall指令等）和外部中断。**

**3.设计了“节奏大师”应用程序，能够通过拨码开关实现IO交互。跟随韵律舞动开关起来（**

## 项目结构

**1.项目包含流水线CPU设计，以及与外部设备的连接，形成了一个完整的单核流水线CPU系统.**

**2.Test文件夹下有测试的coe文件，包含testac.coe为37条指令测试的复杂程序，start.coe和handler.coe为中断功能测试程序，rhythm_master.coe为节奏大师应用程序。**

## “节奏大师”应用程序介绍

**“节奏大师”是一种音游，我把它改编成了能够在电路板上顺利运行的游戏模式。游戏过程中，前两位数码管显示分数（16进制显示），第三位数码管是音符的入口，后五位数码管会源源不断输出音符，音符从左往右移动。当且仅当最后一位数码管显示非0且玩家仅把对应的拨码开关上拨时（拨多个拨码开关无效），或最后一位数码管显示为0且玩家所有拨码开关均不上拨时，会发生“hit”，玩家得1分。否则造成“miss”，用户不得分。游戏结束后，数码管前两位输出Ed标识，后面输出玩家总得分（16进制）**

## 拨码开关功能介绍
**sw_i[0]:控制显示模式**

**sw_i[2]:控制分频，上拨为正常模式，下拨为跳转模式**

**sw_i[7-5]:用于显示。为000时正常显示，为010时显示当前运行的指令，为111时显示当前PC**

**sw_i[15-8]:用于玩家交互。**

**sw_i[3]:用于控制外中断。sw_i[3]上拨时系统进入中断模式，游戏暂停。**
